{
  "info": {
    "name": "VNPay Payment Test",
    "description": "Collection for testing VNPay payment integration",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Check Server Health",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/test/danhsach",
          "host": ["{{baseUrl}}"],
          "path": ["api", "test", "danhsach"]
        }
      }
    },
    {
      "name": "2. Create VNPay Demo Payment",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"amount\": 50000,\n  \"orderInfo\": \"Test thanh toan VNPay demo\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/test/vnpay/demo-payment",
          "host": ["{{baseUrl}}"],
          "path": ["api", "test", "vnpay", "demo-payment"]
        }
      }
    },
    {
      "name": "3. Test VNPay Return Success",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/test/vnpay/return?vnp_Amount=5000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14563280&vnp_CardType=ATM&vnp_OrderInfo=Thanh+toan+don+hang+DEMO_1234567890&vnp_PayDate=20250720143022&vnp_ResponseCode=00&vnp_TmnCode=46OBP8RP&vnp_TransactionNo=14563280&vnp_TransactionStatus=00&vnp_TxnRef=DEMO_1234567890&vnp_SecureHash=test",
          "host": ["{{baseUrl}}"],
          "path": ["api", "test", "vnpay", "return"],
          "query": [
            {
              "key": "vnp_Amount",
              "value": "5000000"
            },
            {
              "key": "vnp_BankCode",
              "value": "NCB"
            },
            {
              "key": "vnp_BankTranNo",
              "value": "VNP14563280"
            },
            {
              "key": "vnp_CardType",
              "value": "ATM"
            },
            {
              "key": "vnp_OrderInfo",
              "value": "Thanh toan don hang DEMO_1234567890"
            },
            {
              "key": "vnp_PayDate",
              "value": "20250720143022"
            },
            {
              "key": "vnp_ResponseCode",
              "value": "00"
            },
            {
              "key": "vnp_TmnCode",
              "value": "46OBP8RP"
            },
            {
              "key": "vnp_TransactionNo",
              "value": "14563280"
            },
            {
              "key": "vnp_TransactionStatus",
              "value": "00"
            },
            {
              "key": "vnp_TxnRef",
              "value": "DEMO_1234567890"
            },
            {
              "key": "vnp_SecureHash",
              "value": "test"
            }
          ]
        }
      }
    },
    {
      "name": "4. Test VNPay IPN",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"vnp_Amount\": \"5000000\",\n  \"vnp_BankCode\": \"NCB\",\n  \"vnp_BankTranNo\": \"VNP14563280\",\n  \"vnp_CardType\": \"ATM\",\n  \"vnp_OrderInfo\": \"Thanh toan don hang DEMO_1234567890\",\n  \"vnp_PayDate\": \"20250720143022\",\n  \"vnp_ResponseCode\": \"00\",\n  \"vnp_TmnCode\": \"46OBP8RP\",\n  \"vnp_TransactionNo\": \"14563280\",\n  \"vnp_TransactionStatus\": \"00\",\n  \"vnp_TxnRef\": \"DEMO_1234567890\",\n  \"vnp_SecureHash\": \"test_signature\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/test/vnpay/ipn",
          "host": ["{{baseUrl}}"],
          "path": ["api", "test", "vnpay", "ipn"]
        }
      }
    },
    {
      "name": "5. Get Payment Methods",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/payments/methods",
          "host": ["{{baseUrl}}"],
          "path": ["api", "payments", "methods"]
        }
      }
    },
    {
      "name": "6. Create Real Payment",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-forwarded-for",
            "value": "127.0.0.1"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": 1,\n  \"paymentMethodId\": 1\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/payments/create",
          "host": ["{{baseUrl}}"],
          "path": ["api", "payments", "create"]
        }
      }
    },
    {
      "name": "7. Test VNPay Config",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/payments/test/vnpay",
          "host": ["{{baseUrl}}"],
          "path": ["api", "payments", "test", "vnpay"]
        }
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    }
  ]
}
